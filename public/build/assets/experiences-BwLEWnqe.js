import{K as R,m as N,r,j as e,L as B}from"./app-7e523FSC.js";import{A as O}from"./app-layout-D710PciM.js";import{I as l}from"./input-error-0gzVpjgp.js";import{B as h}from"./button-DX1lcxT-.js";import{I as x}from"./input-CXNGTfDd.js";import{L as c}from"./label-D4Pgj521.js";import{T as U}from"./textarea-DklnfoE6.js";import{M as u}from"./multi-input-CpMgvDGE.js";import{D as $,f as C}from"./date-picker-with-range-Dg9FUU_n.js";import{C as J}from"./confirm-model-D6yOCYwt.js";import{L as K}from"./loader-circle-D8nY4uRg.js";import"./index-BFLhZdtq.js";import"./dropdown-menu-CumGd39Q.js";import"./index-BoVT7aLE.js";import"./app-logo-icon-7kSI5bS-.js";import"./briefcase-BLY5dM4Q.js";import"./file-text-1jXWwqAk.js";import"./users-PCIl3h8a.js";import"./chevron-right-CcSUNiO3.js";import"./chevron-left-BaV22QPn.js";import"./calendar-BQ7Uxf5X.js";const W=[{title:"Experiences",href:"/admin/experiences"}];function me(){const{experiences:M}=R().props,{data:i,setData:t,post:S,put:D,processing:o,errors:n,reset:g}=N({title:"",company:"",period:"",location:"",description:"",responsibilities:[],achievements:[],technologies:[]}),I=N({}),[a,d]=r.useState(),[f,j]=r.useState(!1),[v,b]=r.useState(null),[y,m]=r.useState(null),[L,p]=r.useState(!1),A=s=>{if(s.preventDefault(),!a||!a.from||!a.to){alert("Please select a date range for the period.");return}if(a.from.getTime()>a.to.getTime()){alert("Please select a valid date range (start must be before end).");return}const P=`${C(a.from,"MMM yyyy")} - ${C(a.to,"MMM yyyy")}`;t("period",P),f&&v?D(route("admin.experiences.update",v),{preserveState:!0,onSuccess:()=>{g(),d(void 0),j(!1),b(null)}}):S(route("admin.experiences.store"),{preserveState:!0,onSuccess:()=>{g(),d(void 0)}})},T=s=>{t("title",s.title),t("company",s.company),t("period",s.period),t("location",s.location),t("description",s.description),t("responsibilities",s.responsibilities),t("achievements",s.achievements),t("technologies",s.technologies),j(!0),b(s.id)},w=s=>{m(s),p(!0)},k=()=>{y&&(I.delete(route("admin.experiences.destroy",y),{preserveState:!0}),p(!1),m(null))},F=()=>{p(!1),m(null)},E=M;return e.jsxs(O,{breadcrumbs:W,children:[e.jsx(B,{title:"Manage Experiences"}),e.jsx(J,{open:L,title:"Confirm Deletion",message:"Are you sure you want to delete this experience? This action cannot be undone.",onConfirm:k,onCancel:F}),e.jsxs("div",{className:"px-8 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Manage Experiences"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",onSubmit:A,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"title",children:"Job Title"}),e.jsx(x,{id:"title",type:"text",value:i.title,onChange:s=>t("title",s.target.value),placeholder:"e.g. Senior Software Engineer",disabled:o}),e.jsx(l,{message:n.title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"company",children:"Company"}),e.jsx(x,{id:"company",type:"text",value:i.company,onChange:s=>t("company",s.target.value),placeholder:"e.g. ACME Corp",disabled:o}),e.jsx(l,{message:n.company})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{children:"Period"}),e.jsx($,{onSelect:d,className:"w-full "}),e.jsx(l,{message:n.period})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"location",children:"Location"}),e.jsx(x,{id:"location",type:"text",value:i.location,onChange:s=>t("location",s.target.value),placeholder:"e.g. New York, USA",disabled:o}),e.jsx(l,{message:n.location})]}),e.jsxs("div",{className:"grid col-span-2 gap-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(U,{id:"description",value:i.description,onChange:s=>t("description",s.target.value),placeholder:"Describe your role and achievements",disabled:o}),e.jsx(l,{message:n.description})]}),e.jsx(u,{label:"Responsibilities",values:i.responsibilities,onChange:s=>t("responsibilities",s),placeholder:"Enter a responsibility"}),e.jsx(u,{label:"Achievements",values:i.achievements,onChange:s=>t("achievements",s),placeholder:"Enter an achievement"}),e.jsx(u,{label:"Technologies",values:i.technologies,onChange:s=>t("technologies",s),placeholder:"Enter a technology"}),e.jsx("div",{className:"flex col-span-2 justify-end",children:e.jsxs(h,{type:"submit",className:"mt-4",disabled:o,children:[o&&e.jsx(K,{className:"h-4 w-4 animate-spin mr-2"}),f?"Update Experience":"Create Experience"]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"All Experiences"}),E.length===0?e.jsx("p",{children:"No experiences found."}):e.jsx("div",{className:"space-y-4",children:E.map(s=>e.jsxs("div",{className:"border p-4 rounded flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:s.title}),e.jsxs("p",{className:"text-sm",children:[s.company," â€¢ ",s.period]}),e.jsx("p",{className:"text-sm",children:s.location})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>T(s),children:"Edit"}),e.jsx(h,{variant:"destructive",onClick:()=>w(s.id),children:"Delete"})]})]},s.id))})]})]})]})}export{me as default};
